<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบห้องเช่า</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        .container {
            width: 90%;
            margin: auto;
            overflow: hidden;
        }
        header {
            background: #333;
            color: #fff;
            padding: 20px 0;
            text-align: center;
        }
        header h1 {
            margin: 0;
        }
        .room-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        .room {
            background: #fff;
            margin: 10px;
            padding: 20px;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 5px;
            width: calc(25% - 40px);
            transition: transform 0.2s;
        }
        .room:hover {
            transform: scale(1.05);
        }
        .room h2 {
            margin-top: 0;
        }
        .available {
            color: green;
        }
        .unavailable {
            color: red;
        }
        .calc-form {
            margin-top: 20px;
        }
        .calc-form input {
            width: calc(50% - 22px);
            padding: 10px;
            margin: 5px 10px 5px 0;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        .calc-form button {
            padding: 10px 20px;
            background: #77d5d4;
            border: none;
            color: #fff;
            border-radius: 3px;
            cursor: pointer;
        }
        .calc-form button:hover {
            background: #5bb1af;
        }
        .calc-result {
            margin-top: 20px;
            padding: 20px;
            background: #eee;
            border-radius: 5px;
        }
        .clear-button {
            background: #ff4c4c;
            border: none;
            color: #fff;
            padding: 10px 20px;
            margin-top: 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        .clear-button:hover {
            background: #ff1c1c;
        }
        .status-button {
            margin-top: 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            color: #fff;
        }
        .status-available {
            background: green;
        }
        .status-unavailable {
            background: red;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>ระบบห้องเช่า</h1>
        </div>
    </header>
    <div class="container">
        <div id="room-list" class="room-list">
            <!-- รายการห้องจะถูกสร้างที่นี่ -->
        </div>
    </div>

    <script>
        const rooms = Array.from({ length: 20 }, (v, i) => ({
            id: i + 1,
            name: `ห้อง ${i + 1}`,
            available: Math.random() > 0.5 // สถานะห้องสุ่ม
        }));

        const roomList = document.getElementById('room-list');

        function toggleRoomStatus(room) {
            room.available = !room.available;
            renderRooms();
        }

        function calculateBill(roomId) {
            const roomRent = 2000;
            const waterUsage = document.getElementById(`water-usage-${roomId}`).value;
            const electricityUsage = document.getElementById(`electricity-usage-${roomId}`).value;
            const waterRate = 10; // อัตราค่าน้ำต่อหน่วย
            const electricityRate = 5; // อัตราค่าไฟฟ้าต่อหน่วย

            const waterBill = waterUsage * waterRate;
            const electricityBill = electricityUsage * electricityRate;
            const totalBill = roomRent + waterBill + electricityBill;

            const resultDiv = document.getElementById(`calc-result-${roomId}`);
            resultDiv.innerHTML = `
                <h3>ใบเสร็จ</h3>
                <p>ค่าเช่าห้อง: ${roomRent} บาท</p>
                <p>ค่าน้ำ: ${waterBill} บาท</p>
                <p>ค่าไฟฟ้า: ${electricityBill} บาท</p>
                <p>ค่าใช้จ่ายรวม: ${totalBill} บาท</p>
            `;
        }

        function clearUsage(roomId) {
            document.getElementById(`water-usage-${roomId}`).value = '';
            document.getElementById(`electricity-usage-${roomId}`).value = '';
            document.getElementById(`calc-result-${roomId}`).innerHTML = '';
        }

        function renderRooms() {
            roomList.innerHTML = '';
            rooms.forEach(room => {
                const roomDiv = document.createElement('div');
                roomDiv.className = 'room';

                const roomName = document.createElement('h2');
                roomName.textContent = room.name;
                roomDiv.appendChild(roomName);

                const roomStatus = document.createElement('p');
                roomStatus.className = room.available ? 'room-status available' : 'room-status unavailable';
                roomStatus.textContent = room.available ? 'ว่าง' : 'ไม่ว่าง';
                roomDiv.appendChild(roomStatus);

                const statusButton = document.createElement('button');
                statusButton.className = `status-button ${room.available ? 'status-available' : 'status-unavailable'}`;
                statusButton.textContent = room.available ? 'เปลี่ยนเป็นไม่ว่าง' : 'เปลี่ยนเป็นว่าง';
                statusButton.addEventListener('click', () => toggleRoomStatus(room));
                roomDiv.appendChild(statusButton);

                const calcForm = document.createElement('div');
                calcForm.className = 'calc-form';
                calcForm.innerHTML = `
                    <input type="number" id="water-usage-${room.id}" placeholder="ปริมาณการใช้น้ำ (หน่วย)">
                    <input type="number" id="electricity-usage-${room.id}" placeholder="ปริมาณการใช้ไฟฟ้า (หน่วย)">
                    <button onclick="event.stopPropagation(); calculateBill(${room.id})">คำนวณ</button>
                    <button class="clear-button" onclick="event.stopPropagation(); clearUsage(${room.id})">เคลียร์ข้อมูล</button>
                    <div id="calc-result-${room.id}" class="calc-result"></div>
                `;
                roomDiv.appendChild(calcForm);

                roomList.appendChild(roomDiv);
            });
        }

        renderRooms();
    </script>
</body>
</html>
